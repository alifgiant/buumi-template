# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Buumi - Build
on:
  workflow_dispatch:
  push:
    branches:
      - release
    paths:
      - packages/**
      - features/**
      - host/**
jobs:
  build_apk:
    defaults:
      run:
        working-directory: host
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: subosito/flutter-action@v2.8.0
        with:
          flutter-version: '3.13.6'
          cache: true
      - run: flutter pub get
      - run: flutter build apk --release
      - name: APK artifacts
        uses: actions/upload-artifact@v3
        with:
          name: apk
          path: |
            host/build/app/outputs/bundle/**
            host/build/app/intermediates/merged_native_libs/release/out/lib/**
          retention-days: 1

  # build_app_bundle:
  #   defaults:
  #     run:
  #       working-directory: apps/bipang
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v3
  #     - uses: subosito/flutter-action@v2.8.0
  #       with:
  #         flutter-version: '3.13.1'
  #         cache: true
  #     - run: flutter pub get
  #     - run: flutter build appbundle --release
  #     - name: Appbundle artifacts
  #       uses: actions/upload-artifact@v3
  #       with:
  #         name: bundle
  #         path: |
  #           apps/bipang/build/app/outputs/bundle/**
  #           apps/bipang/build/app/intermediates/merged_native_libs/release/out/lib/**
  #         retention-days: 2
